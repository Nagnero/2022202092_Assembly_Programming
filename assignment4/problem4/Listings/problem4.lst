


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             ARMex, CODE, READONLY
    2 00000000                 ENTRY
    3 00000000         
    4 00000000         start
    5 00000000 E59F00B0        LDR              r0, TEMPADDR1
    6 00000004 E59F10B0        LDR              r1, Value1  ; first value
    7 00000008 E59F20B0        LDR              r2, Value2  ; second value
    8 0000000C         
    9 0000000C         ; get value1's sign bit
   10 0000000C E5801000        STR              r1, [r0]
   11 00000010 E5D03003        LDRB             r3, [r0, #3]
   12 00000014 E3530080        CMP              r3, #0x80
   13 00000018 23A03001        MOVCS            r3, #1
   14 0000001C 33A03000        MOVCC            r3, #0
   15 00000020         
   16 00000020         ; get value1's exponent bit
   17 00000020 E1D050B3        LDRH             r5, [r0, #3]
   18 00000024 E1A05885        LSL              r5, #17
   19 00000028 E1A05C25        LSR              r5, #24
   20 0000002C         
   21 0000002C         ; get value1's mantissa bit and add 1.0
   22 0000002C E5907000        LDR              r7, [r0]
   23 00000030 E1A07487        LSL              r7, #9
   24 00000034 E1A070A7        LSR              r7, #1
   25 00000038 E2877102        ADD              r7, r7, #0x80000000
   26 0000003C E1A074A7        LSR              r7, #9
   27 00000040         
   28 00000040         ; get value2's sign bit
   29 00000040 E5802000        STR              r2, [r0]
   30 00000044 E5D04003        LDRB             r4, [r0, #3]
   31 00000048 E3540080        CMP              r4, #0x80
   32 0000004C 23A04001        MOVCS            r4, #1
   33 00000050 33A04000        MOVCC            r4, #0
   34 00000054         
   35 00000054         ; get value2's exponent bit
   36 00000054 E1D060B3        LDRH             r6, [r0, #3]
   37 00000058 E1A06886        LSL              r6, #17
   38 0000005C E1A06C26        LSR              r6, #24
   39 00000060         
   40 00000060         ; get value2's mantissa bit and add 1.0
   41 00000060 E5908000        LDR              r8, [r0]
   42 00000064 E1A08488        LSL              r8, #9
   43 00000068 E1A080A8        LSR              r8, #1
   44 0000006C E2888102        ADD              r8, r8, #0x80000000
   45 00000070 E1A084A8        LSR              r8, #9
   46 00000074         
   47 00000074         
   48 00000074         ; check 0
   49 00000074 E0859007        ADD              r9, r5, r7
   50 00000078 E3590000        CMP              r9, #0
   51 0000007C 0A000010        BEQ              value10
   52 00000080 E0869008        ADD              r9, r6, r8
   53 00000084 E3590000        CMP              r9, #0
   54 00000088 0A00000E        BEQ              value20
   55 0000008C         
   56 0000008C         ; check Nan
   57 0000008C         
   58 0000008C         
   59 0000008C E1550006        CMP              r5, r6      ; compare exponent



ARM Macro Assembler    Page 2 


   60 00000090 0A000007        BEQ              same        ; exponent is equal
                                                            
   61 00000094         
   62 00000094         ; exponent of val1 > val2
   63 00000094 80459006        SUBHI            r9, r5, r6  ; r9 = r5 - r6
   64 00000098 80866009        ADDHI            r6, r6, r9  ; increase val2 exp
                                                            onent
   65 0000009C 81A08938        LSRHI            r8, r9      ; right shift val2 
                                                            mantissa
   66 000000A0 81A0A005        MOVHI            r10, r5
   67 000000A4         
   68 000000A4         ; exponent of val1 < val2
   69 000000A4 80469005        SUBHI            r9, r6, r5  ; r9 = r6 - r5
   70 000000A8 80855009        ADDHI            r5, r5, r9  ; increase val1 exp
                                                            onent
   71 000000AC 81A07937        LSRHI            r7, r9      ; right shift val1 
                                                            mantissa
   72 000000B0 81A0A006        MOVHI            r10, r6
   73 000000B4         
   74 000000B4         same
   75 000000B4 01A0A005        MOVEQ            r10, r5
   76 000000B8         
   77 000000B8         
   78 000000B8         
   79 000000B8 00040000 
                       TEMPADDR1
                               &                &40000
   80 000000BC 3F800000 
                       Value1  DCD              0x3F800000
   81 000000C0 40500000 
                       Value2  DCD              0x40500000
   82 000000C4         
   83 000000C4         value10
   84 000000C4 E3A01000        MOV              r1, #0
   85 000000C8         
   86 000000C8         value20
   87 000000C8 E3A01000        MOV              r1, #0
   88 000000CC         
   89 000000CC         endline
   90 000000CC E1A0F00E        MOV              pc, lr
   91 000000D0                 END
Command Line: --debug --xref --diag_suppress=9931 --cpu=ARM9E --apcs=interwork 
--depend=.\objects\problem4.d -o.\objects\problem4.o -IC:\Keil_v5\ARM\RV31\INC 
-IC:\Keil_v5\ARM\CMSIS\Include --predefine="__EVAL SETA 1" --predefine="__UVISI
ON_VERSION SETA 529" --list=.\listings\problem4.lst problem4.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

ARMex 00000000

Symbol: ARMex
   Definitions
      At line 1 in file problem4.s
   Uses
      None
Comment: ARMex unused
TEMPADDR1 000000B8

Symbol: TEMPADDR1
   Definitions
      At line 79 in file problem4.s
   Uses
      At line 5 in file problem4.s
Comment: TEMPADDR1 used once
Value1 000000BC

Symbol: Value1
   Definitions
      At line 80 in file problem4.s
   Uses
      At line 6 in file problem4.s
Comment: Value1 used once
Value2 000000C0

Symbol: Value2
   Definitions
      At line 81 in file problem4.s
   Uses
      At line 7 in file problem4.s
Comment: Value2 used once
endline 000000CC

Symbol: endline
   Definitions
      At line 89 in file problem4.s
   Uses
      None
Comment: endline unused
same 000000B4

Symbol: same
   Definitions
      At line 74 in file problem4.s
   Uses
      At line 60 in file problem4.s
Comment: same used once
start 00000000

Symbol: start
   Definitions
      At line 4 in file problem4.s
   Uses
      None
Comment: start unused
value10 000000C4

Symbol: value10



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 83 in file problem4.s
   Uses
      At line 51 in file problem4.s
Comment: value10 used once
value20 000000C8

Symbol: value20
   Definitions
      At line 86 in file problem4.s
   Uses
      At line 54 in file problem4.s
Comment: value20 used once
9 symbols
341 symbols in table
